---
title: "Scientific subscription costs in Finland 2010-2015"
author: Leo Lahti
date: "`r Sys.Date()`"
output: 
  md_document:
    variant: markdown_github
---


```{r foi-init, message=FALSE, echo=FALSE}
library(dplyr)
library(tidyr)
library(reshape2)
library(ggplot2)
theme_set(theme_bw(20))
# License fee data URL
f <- "~/data/Tietopyynto/20160607\ Kustantajahintatiedot_koottu_v0.99.csv"
# Read the data
df <- read.csv(f, fileEncoding = "latin1")
# Rename
df = rename(df, Publisher = Kustantaja.Välittäjä)
df = rename(df, Organization = Organisaation.nimi)
df = rename(df, Material = Aineistotyyppi)
df = rename(df, Type = Hankintatapa)
df = rename(df, Year = Vuosi)
df = rename(df, Price = Hinta)
```


Publishers subscription costs in Finland 2010-2015
===========


### Background

Following [Tim Gowers FOI request on scientific subscription costs in
UK](http://gowers.wordpress.com/2014/04/24/elsevier-journals-some-facts/),
we made a similar request in Finland together with [OKF
Finland](http://fi.okfn.org/wg/openscience/) and [other open science
enthusiasts](https://www.facebook.com/groups/241398182642057/permalink/411482855633588).

I sent the FOI request to Finnish universities in summer 2014. After
their denial to release the data we appealed in court, which decided
the case positive for us in August 2015. The Finnish Ministry of
Education [Open Science Initiative](http://openscience.fi) then
collected and organized the data, which has now been released on
[their website](). The overall process is summarized in another [blog
post]().

Related data have been collected in a few countries (see Stuart
Lawson's [recent
post](http://stuartlawson.org/2016/06/publicly-available-data-on-international-journal-subscription-costs).
However, Finland is now one of the first countries (after US and UK)
where the subscription fees are available over several years at the
level of individual publishers. Below is a preliminary analysis of
this data collection, made with a fully reproducible [source
code](https://github.com/antagomir/temp/blob/master/20160610/foi.Rmd).


### Overall subscription costs 2010-2015

```{r foi-totalcosts, message=FALSE, echo=FALSE, fig.show="hold", out.width="430px", fig.width = 9, fig.height = 5}
dfs = df %>% group_by(Organisaation.tyyppi) %>% summarise(Costs = sum(Price)/1e6) %>% arrange(Costs)
dfs$Organisaation.tyyppi = factor(dfs$Organisaation.tyyppi, levels = as.character(dfs$Organisaation.tyyppi))
p <- ggplot(dfs, aes(x = Organisaation.tyyppi, y = Costs)) + geom_bar(stat = "identity") + ggtitle("Costs by organization type") + coord_flip() + xlab("") + ylab("Total Costs (MEUR)")
print(p)

dfs = df %>% group_by(Material) %>% summarise(Costs = sum(Price)/1e6) %>% arrange(desc(Costs))
dfs$Material = factor(dfs$Material, levels = rev(as.character(dfs$Material)))
# Only consider the high-level categories
dfss = dfs[-grep(";", dfs$Material),]
p <- ggplot(dfss, aes(x = Material, y = Costs)) + geom_bar(stat = "identity") + ggtitle("Costs by material") + coord_flip() + xlab("") + ylab("Total Costs (MEUR)")
print(p)
names(dfs) = c("Material", "Total (MEUR)")
write.csv(dfs, file = "table/cost_by_material.csv", quote = F, row.names = F)
```


```{r foi-totalcosts2, message=FALSE, echo=FALSE, fig.show="hold", out.width="430px", fig.width = 9, fig.height = 10}
dfs = df %>% group_by(Organization) %>% summarise(Costs = sum(Price)/1e6) %>% arrange(desc(Costs))
dfs$Organization = factor(dfs$Organization, levels = rev(as.character(dfs$Organization)))
p <- ggplot(dfs[1:20,], aes(x = Organization, y = Costs)) + geom_bar(stat = "identity") + ggtitle("Costs by organization") + coord_flip() + xlab("") + ylab("Total Costs (MEUR)")
print(p)
names(dfs) = c("Organization", "Total (MEUR)")
write.csv(dfs, file = "table/cost_by_organization.csv", quote = F, row.names = F)

dfs = df %>% group_by(Publisher) %>% summarise(Costs = sum(Price)/1e6) %>% arrange(desc(Costs))
dfs$Publisher = factor(dfs$Publisher, levels = rev(as.character(dfs$Publisher)))
p <- ggplot(dfs[1:20,], aes(x = Publisher, y = Costs)) + geom_bar(stat = "identity") + ggtitle("Costs by publisher") + coord_flip() + xlab("") + ylab("Total Costs (MEUR)")
print(p)
names(dfs) = c("Publisher", "Total (MEUR)")
write.csv(dfs, file = "table/cost_by_publisher.csv", quote = F, row.names = F)



dfs = df %>% group_by(Type) %>% summarise(Costs = sum(Price)/1e6) %>% arrange(desc(Costs))
dfs$Type = factor(dfs$Type, levels = rev(as.character(dfs$Type)))
names(dfs) = c("Type", "Total (MEUR)")
write.csv(dfs, file = "table/cost_by_type.csv", quote = F, row.names = F)

dfs = df %>% group_by(Year) %>% summarise(Costs = sum(Price)/1e6) %>% arrange(desc(Year))
names(dfs) = c("Year", "Total (MEUR)")
write.csv(dfs, file = "table/cost_by_year.csv", quote = F, row.names = F)
```

### Total costs for Finland 2010-2015

The total costs paid to scientific publishers by Finland 2010-2015. The annual increase is indicated.

```{r foi-timeline, message=FALSE, eval=TRUE, echo=FALSE, fig.show="hold", out.width="400px"}
# Price, Year : all publishers
# Growth percentage compared to previous year is shown
dfs = df %>% group_by(Year) %>% summarise(Costs = sum(Price)/1e6) 
p <- ggplot(dfs, aes(x = Year, y = Costs)) +
       geom_bar(stat = "identity") + ggtitle("Total costs for Finland") +
       geom_text(data = dfs[-1,], aes(x = Year, y = 1.042 * Costs,
     label = paste(round(100 * diff(dfs$Costs)/dfs$Costs[-length(dfs$Costs)], 1), "%", sep = "")   ),
     	   size = 8) +
       scale_x_continuous(breaks = 2010:2015, labels = c(2010:2015)) + 
       ylab("Costs (MEUR)")
print(p)
```


## Publication costs with top publishers 2010-2015

 * [Total costs by organization (complete table)](table/cost_by_organization.csv)
 * [Total costs by publisher (complete table)](table/cost_by_publisher.csv)
 * [Total costs by material](table/cost_by_material.csv)
 * [Total costs by type](table/cost_by_type.csv)
 * [Total costs by year](table/cost_by_year.csv)   

```{r foi-toppublishercosts, message=FALSE, eval=TRUE, echo=FALSE, fig.show="hold", out.width="200px"}
# Total cost : all publishers
dfs <- df %>% group_by(Publisher) %>% summarise(Cost = sum(Price)/1e6) %>% arrange(desc(Cost))
colnames(dfs) = c("Publisher", "Cost (MEUR)")
kable(head(dfs, 20))
```


## Costs by publisher over time

Top-10 publishers (out of `r nrow(dfs)`) correspond to `r round(100 * sum(dfs[["Cost (MEUR)"]][1:10])/sum(dfs[["Cost (MEUR)"]]))`% of the overall costs.

```{r foi-timebypublisher, message=FALSE, echo=FALSE, fig.width=10, fig.height=5}
# Price, Year : individual publishers compared
# Growth percentage compared to previous year is shown
top.publishers <- as.character(dfs$Publisher[1:10])
dfs <- dplyr::filter(df, Publisher %in% top.publishers) %>% group_by(Year, Publisher) %>% summarise(Costs = sum(Price)/1e6) %>% arrange(Year)
dfs$Publisher <- factor(dfs$Publisher, levels = top.publishers)
p <- ggplot(dfs, aes(x = Year, y = Costs, color = Publisher)) +
       geom_point() +
       geom_line() +       
       ggtitle("Price development by publisher") +
       ylab("Price (MEUR)") 
print(p)
```




